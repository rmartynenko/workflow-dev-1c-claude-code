# System Patterns — Архитектурные решения

> Документация ключевых архитектурных решений с обоснованием

## Архитектурные принципы

| Принцип | Применение в проекте |
|---------|---------------------|
| Модульность | [Как реализовано] |
| Слабая связанность | [Как реализовано] |
| Единая ответственность | [Как реализовано] |

---

## Решение 1: [Название]

### Контекст
[Описание ситуации, требующей решения]

### Решение
[Описание выбранного решения]

### Обоснование
- [Причина 1]
- [Причина 2]

### Альтернативы (отклонённые)

| Альтернатива | Почему отклонена |
|--------------|-----------------|
| [Вариант 1] | [Причина] |
| [Вариант 2] | [Причина] |

### Последствия
**Положительные:**
- [Плюс 1]
- [Плюс 2]

**Отрицательные:**
- [Минус 1]

---

## Решение 2: [Название]

### Контекст
[Описание]

### Решение
[Описание]

### Обоснование
- [Причина]

---

## Структура модулей

```
ОбщиеМодули/
├── [Префикс]Маршрутизатор        # Маршрутизация запросов
├── [Префикс]Авторизация          # Авторизация и права
├── [Префикс]Валидация            # Валидация данных
├── [Префикс]ФормированиеОтветов  # Формирование ответов API
├── [Префикс]ОбработкаОшибок      # Обработка и логирование ошибок
├── [Префикс]ОбщегоНазначения     # Общие утилиты
└── [Префикс][Домен]*             # Модули по доменам
```

### Правила именования модулей

| Категория | Паттерн | Пример |
|-----------|---------|--------|
| HTTP-слой | [Префикс]HTTP* | бэксHTTPКлиент |
| Бизнес-логика | [Префикс][Домен] | бэксОбработкаЗаказов |
| Утилиты | [Префикс]ОбщегоНазначения | бэксОбщегоНазначения |
| Интеграция | [Префикс]Интеграция* | бэксИнтеграцияСЕРП |

---

## Паттерны обработки данных

### Паттерн 1: [Название]

**Когда использовать:**
[Описание ситуации]

**Реализация:**
```bsl
// Пример кода
```

### Паттерн 2: [Название]

**Когда использовать:**
[Описание]

---

## API Design

### URL структура

```
/hs/[сервис]/api/v{version}/{resource}[/{id}][/{action}]
```

### Формат ответа

```json
{
  "data": { },
  "errors": [{ "code": "", "message": "", "field": "" }],
  "meta": { "request_id": "", "timestamp": "" }
}
```

### HTTP статусы

| Код | Когда использовать |
|-----|-------------------|
| 200 | Успешный GET |
| 201 | Успешный POST (создание) |
| 400 | Ошибка валидации |
| 401 | Не авторизован |
| 403 | Нет прав |
| 404 | Не найдено |
| 500 | Серверная ошибка |

---

## Паттерны интеграции

### Синхронный обмен
[Описание когда и как]

### Асинхронный обмен
[Описание когда и как]

### Очередь сообщений
[Описание структуры очереди]

---

## Безопасность

### Авторизация
[Описание механизма]

### Валидация входных данных
[Описание подхода]

### Логирование
[Что и как логируется]

---

*Последнее обновление: [дата]*
