# Команда: Регистрация новой задачи

## Назначение

Формализация и регистрация новой задачи с выбором подходящего workflow.

## Когда использовать

- При получении новой задачи от пользователя
- При выявлении необходимости доработки в процессе работы
- При декомпозиции большой задачи на подзадачи

## Действия

### 1. Сбор информации о задаче

Уточнить у пользователя (если не указано):

```markdown
## Информация о задаче

### Описание
[Что нужно сделать?]

### Тип задачи
- [ ] Новая функциональность (FEAT)
- [ ] Исправление ошибки (FIX)
- [ ] Рефакторинг (REFACTOR)
- [ ] Документация (DOC)
- [ ] Метаданные (META)

### Приоритет
- [ ] Critical — блокирует работу
- [ ] High — важная функциональность
- [ ] Medium — стандартная задача
- [ ] Low — улучшения

### Ожидаемый результат
[Как понять, что задача выполнена?]
```

### 2. Классификация задачи

| Критерий | Значение | Workflow |
|----------|----------|----------|
| Затрагивает файлов | 1-3 | small-changes |
| Затрагивает файлов | 4+ | feature-development |
| Требует архитектуры | Да | feature-development |
| Требует исследования | Да | feature-development |
| Время выполнения | < 1 час | small-changes |
| Время выполнения | > 1 час | feature-development |

### 3. Генерация ID задачи

Формат: `{TYPE}-{NUMBER}`

```
FEAT-1, FIX-23, REFACTOR-5, DOC-3, META-12
```

### 4. Создание записи в TodoWrite

```
TodoWrite:
1. [pending] {ID}: {Краткое описание}
   - Подзадача 1 (если есть)
   - Подзадача 2 (если есть)
```

### 5. Регистрация в трекере (если настроен)

```bash
# Yougile
$YOUGILE_CLI task create --title "{ID}: {Описание}" --column-id <todo_id>

# GitHub Issues
gh issue create --title "{ID}: {Описание}" --body "..."
```

### 6. Обновление activeContext.md

Добавить задачу в раздел "Активные задачи".

### 7. Создание TASK.md (для сложных задач)

Если выбран workflow feature-development:

```markdown
# Задача: {ID} — {Название}

## Описание
[Подробное описание]

## Требования
- [ ] Требование 1
- [ ] Требование 2

## Контекст
- Связанные файлы: ...
- Зависимости: ...

## План реализации
[Заполняется на фазе 4 — Architecture Design]

## Прогресс
[Обновляется по ходу работы]
```

### 8. Вывод результата

```markdown
## Задача зарегистрирована

### ID
{TYPE}-{NUMBER}

### Описание
{Описание}

### Тип
{Тип}

### Приоритет
{Приоритет}

### Workflow
{small-changes / feature-development}

### Следующий шаг
{Описание первого шага согласно выбранному workflow}

---
Начинаем работу?
```

## Пример вызова

```
Новая задача: Добавить endpoint получения истории статусов заказа
```

или

```
/new-task Добавить endpoint получения истории статусов заказа
```

## Быстрая регистрация

Для простых задач можно использовать короткую форму:

```
Задача: [описание]
Тип: [FEAT/FIX/REFACTOR]
```

Claude автоматически:
1. Сгенерирует ID
2. Выберет workflow
3. Создаст TodoWrite
4. Начнёт работу

## Шаблоны типов задач

### FEAT — Новая функциональность
```
FEAT-X: Добавить [что] для [кого/чего]
```

### FIX — Исправление ошибки
```
FIX-X: Исправить [проблема] в [где]
```

### REFACTOR — Рефакторинг
```
REFACTOR-X: Реорганизовать [что] для [цель]
```

### DOC — Документация
```
DOC-X: Документировать [что]
```

### META — Метаданные (выполняет пользователь)
```
META-X: Создать [тип объекта] [название]
```
